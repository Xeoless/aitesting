<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meow - Games</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav>
    <a href="index.html">Home</a> |
    <a href="apps.html">Apps</a>
  </nav>

  <header>
    <h1>Meow Games ðŸ˜¼</h1>
    <p>Click thumbnails to play in overlay UI</p>
  </header>

  <section id="search-section">
    <h2>Search Games</h2>
    <form id="searchForm">
      <input type="text" id="query" placeholder="e.g. slope unblocked" required>
      <button type="submit">Search</button>
    </form>

    <div id="search-results" style="margin-top:30px; border:2px solid #ff99ff; border-radius:12px; overflow:hidden; display:none;">
      <iframe id="resultsFrame" width="100%" height="600" frameborder="0" allowfullscreen sandbox="allow-scripts allow-same-origin allow-popups allow-forms"></iframe>
    </div>

    <p id="search-note" style="text-align:center; color:#ff9999; display:none;">
      Blocked? Use tab fallback below.
    </p>
    <button id="search-fallback-btn" style="display:none; margin:10px auto; background:#ff66ff; color:white; padding:12px 24px; border:none; border-radius:12px; cursor:pointer;">
      Open in Tab
    </button>
  </section>

  <section id="featured-games">
    <h2>Games</h2>

    <div class="game-grid">
      <div class="game-card" onclick="openGameModal('https://gabrielecirulli.github.io/2048/', '2048')">
        <img src="images/2048.png" alt="2048">
        <p>2048</p>
      </div>

      <div class="game-card" onclick="openGameModal('https://slope-game-io.github.io/', 'Slope')">
        <img src="images/slope.png" alt="Slope">
        <p>Slope</p>
      </div>

      <div class="game-card" onclick="openGameModal('https://run3free.github.io/', 'Run 3')">
        <img src="images/run3.png" alt="Run 3">
        <p>Run 3</p>
      </div>

      <div class="game-card" onclick="openGameModal('https://retrobowl.me/', 'Retro Bowl')">
        <img src="images/retro-bowl.png" alt="Retro Bowl">
        <p>Retro Bowl</p>
      </div>

      <div class="game-card" onclick="openGameModal('https://1v1-lol-online.github.io/', '1v1.lol')">
        <img src="images/5269718.jpg" alt="1v1.lol">
        <p>1v1.lol</p>
      </div>

      <div class="game-card" onclick="openGameModal('https://orteil.dashnet.org/cookieclicker/', 'Cookie Clicker')">
        <img src="images/cookie-clicker.png" alt="Cookie Clicker">
        <p>Cookie Clicker</p>
      </div>
    </div>
  </section>

  <!-- Overlay Modal for Games (on top of screen) -->
  <div id="game-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h3 id="modal-title">Loading...</h3>
      <button id="modal-fullscreen">Fullscreen</button>
      <iframe id="modal-iframe" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>

  <footer style="text-align:center; margin-top:60px; color:#9966ff;">
    <p>Meow Hub â€¢ Stay Sneaky</p>
  </footer>

  <script>
    // Search embed + fallback
    const form = document.getElementById('searchForm');
    const queryInput = document.getElementById('query');
    const fallbackBtn = document.getElementById('search-fallback-btn');

    if (form) {
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        let q = queryInput.value.trim();
        if (!q) return;

        q = encodeURIComponent(q + ' unblocked html5 games');
        const searchUrl = `https://duckduckgo.com/?q=${q}&kp=1&kl=us-en&ia=web`;

        const frame = document.getElementById('resultsFrame');
        const resultsDiv = document.getElementById('search-results');
        const note = document.getElementById('search-note');

        frame.src = searchUrl;
        resultsDiv.style.display = 'block';
        note.style.display = 'none';
        fallbackBtn.style.display = 'none';

        frame.onload = () => {
          try {
            const content = frame.contentDocument || frame.contentWindow.document;
            if (content.body.innerHTML.length < 500) {
              note.style.display = 'block';
              fallbackBtn.style.display = 'block';
              fallbackBtn.onclick = () => window.open(searchUrl, '_blank');
            }
          } catch (err) {
            note.style.display = 'block';
            fallbackBtn.style.display = 'block';
            fallbackBtn.onclick = () => window.open(searchUrl, '_blank');
          }
        };

        queryInput.value = '';
      });
    }

    // Open game in overlay modal (on top)
    function openGameModal(url, title) {
      const modal = document.getElementById('game-modal');
      const iframe = document.getElementById('modal-iframe');
      const titleEl = document.getElementById('modal-title');

      titleEl.textContent = title;
      iframe.src = url;
      modal.style.display = 'block';
      document.body.style.overflow = 'hidden'; // Prevent scroll behind modal
    }

    // Close modal
    document.querySelector('.close-modal').addEventListener('click', () => {
      const modal = document.getElementById('game-modal');
      const iframe = document.getElementById('modal-iframe');
      iframe.src = '';
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';
    });

    // Click outside modal to close
    window.addEventListener('click', (e) => {
      if (e.target === document.getElementById('game-modal')) {
        document.querySelector('.close-modal').click();
      }
    });

    // Fullscreen for modal iframe
    document.getElementById('modal-fullscreen').addEventListener('click', () => {
      const iframe = document.getElementById('modal-iframe');
      if (iframe.requestFullscreen) iframe.requestFullscreen();
      else if (iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen();
      else if (iframe.msRequestFullscreen) iframe.msRequestFullscreen();
    });
  </script>
</body>
</html>
